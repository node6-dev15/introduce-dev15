<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- J쿼리 cdn  -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- 부트스트랩 cdn  -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- css import -->
    <link rel="stylesheet" type="text/css" href="static/bbs.css">
    <link rel="stylesheet" type="text/css" href="static/member.css">
    <!-- fontawesome cdn -->
    <script src="https://kit.fontawesome.com/06263c1511.js" crossorigin="anonymous"></script>
    <!-- bootstrap icon cdn  -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">
    <!-- 이 아래부터 nav bar -->
    <div>
        <nav class="navbar">
            <div class="navbar_logo">
                <i class="fa-solid fa-code-pull-request"></i>
                <a class="navbar_name" href="#">BCOMDEV15</a>
            </div>
            <ul class="navbar_menu">
                <li><a href="member.html">Home</a></li>
                <li><a href="project.html">Project</a></li>
                <li><a href="Team project.html">Member</a></li>
                <li><a href="bbs.html">BBS</a></li>
            </ul>

            <ul class="navbar_icon">
                <li><i class="bi bi-file-earmark-code-fill"></i></li>
            </ul>

            <a class="navbar_toggleBtn" href="#">
                <i class="fa-solid fa-bars"></i>
            </a>
        </nav>
    </div>

    <title>개발자가되구15 > member</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">


    <script type="module">
        // Firebase SDK 라이브러리 가져오기
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { doc, updateDoc, deleteDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { query, orderBy } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";


        // Firebase 구성 정보 설정
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyCyI5H_aW_GImh2ZNYlRHLEbzaJ1KU_vCk",
            authDomain: "sparta-d42b9.firebaseapp.com",
            projectId: "sparta-d42b9",
            storageBucket: "sparta-d42b9.appspot.com",
            messagingSenderId: "1021663070623",
            appId: "1:1021663070623:web:40ff96d9f0fc1bcea4d5aa",
            measurementId: "G-X26RGY3T3G"
        };


        // Firebase 인스턴스 초기화
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const board = collection(db, "team");

        // let docs = await getDocs(query(board, orderBy('name', 'asc')));

        docs.forEach((tempdoc) => {
            let row = tempdoc.data();
            let doc_id = tempdoc.id;
            let image = row['image'];
            let name = row['name'];
            let age = row['age'];
            let date = row['date'];
            let br = row['br'];
            let github = row['github'];
            let mbti = row['mbti'];
            let go = row['go'];


            let div = document.createElement('div');
            div.className = 'col';


            let temp_html = `            
                <div class="card h-100">
                    <img src="${image}"
                        class="card-img-top" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">이름 : ${name}</h5>
                        <p class="card-text">나이 : ${age}</p>
                        <p class="card-text">취미 : ${date}</p>
                        <p class="card-text">블로그 : ${br}</p>
                        <p class="card-text">깃허브 : ${github}</p>
                        <p class="card-text">MBTI : ${mbti}</p>
                    </div>
                    <div class="card-footer">
                        <small class="text-body-secondary">각오 한마디 : ${go}</small>
                    </div>
                </div>
                `


            let onoff = "off"
            div.innerHTML = temp_html;

            div.addEventListener('click', (e) => {

                $('.mypostingbox').remove();

                let temp_modify = `
                    <div class="mypostingbox">
                        <div class="form-floating mb-3">
                            <input type="email" class="form-control" id="inputimage" placeholder="이미지" input value="${image}">
                                <label for="floatingInput">팀원 이미지</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="email" class="form-control" id="inputname" placeholder="이름" input value="${name}">
                                <label for="floatingInput">이름</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="email" class="form-control" id="inputage" placeholder="나이" input value="${age}">
                                <label for="floatingInput">나이</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="email" class="form-control" id="inputdate" placeholder="취미" input value="${date}">
                                <label for="floatingInput">취미</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="email" class="form-control" id="inputbr" placeholder="블로그" input value="${br}">
                                <label for="floatingInput">블로그</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="email" class="form-control" id="inputgithub" placeholder="깃허브" input value="${github}">
                                <label for="floatingInput">깃허브</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="email" class="form-control" id="inputmbti" placeholder="mbti" input value="${mbti}">
                                <label for="floatingInput">mbti</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="email" class="form-control" id="inputgo" placeholder="각오 한마디" input value="${go}">
                                <label for="floatingInput">각오 한마디</label>
                        </div>
                        <div class="mybtn">
                            <button id="update-btn" type="button" class="btn btn-outline-info">수정하기</button>
                            <button id="close" type="button" class="btn btn-outline-dark">닫기</button>
                        </div>
                    </div>`

                $('#postingbox').append(temp_modify);

                $('#update-btn').click(async function () {

                    let inputimage = $('#inputimage').val();
                    let inputname = $('#inputname').val();
                    let inputage = $('#inputage').val();
                    let inputdate = $('#inputdate').val();
                    let inputbr = $('#inputbr').val();
                    let inputgithub = $('#inputgithub').val();
                    let inputmbti = $('#inputmbti').val();
                    let inputgo = $('#inputgo').val();


                    await updateDoc(doc(db, "team", doc_id), {
                        'image': inputimage,
                        'name': inputname,
                        'age': inputage,
                        'date': inputdate,
                        'br': inputbr,
                        'github': inputgithub,
                        'mbti': inputmbti,
                        'go': inputgo
                    });

                    window.location.reload();
                })

                $('#close').click(async function () {
                    $('.mypostingbox').remove();
                })

            })

            $('#card').append(div);
        });
    </script>

    <!-- 날씨 스크립트 단독실행 -->
    <script>
        let url = "http://spartacodingclub.shop/sparta_api/weather/seoul";
        fetch(url).then(res => res.json()).then(data => {
            let temp = data['temp'];
            $('#c').text(temp);
            let url = "http://spartacodingclub.shop/sparta_api/seoulair";
            fetch(url).then(res => res.json()).then(data => {
                let mise = data['RealtimeCityAir']['row'][0]['IDEX_NM']
                $('#msg').text(mise);
            })
        })
    </script>
</head>

<body>
    <div class="mytitle">
        <h1>TEAM. 개발자가되구15</h1>
        <p>현재 서울의 기온 : <span id="c"></span>도</p>
        <p>현재 서울의 미세먼지 : <span id="msg">나쁨</span></p>
    </div>

    <div class="profilebox" id="wrap">
        <div class="profile">
            <a href="https://github.com/mingyu6688" target="_blank">
                <img src="https://avatars.githubusercontent.com/u/177496897?v=4">
            </a>
        </div>
        <div class="profile">
            <a href="https://github.com/liha-engineer" target="_blank">
                <img src="https://avatars.githubusercontent.com/u/122168823?v=4">
            </a>
        </div>
        <div class="profile">
            <a href="https://github.com/sdh02142" target="_blank">
                <img src="https://avatars.githubusercontent.com/u/177493329?v=4">
            </a>
        </div>
        <div class="profile">
            <a href="https://github.com/Chong-Chongs" target="_blank">
                <img src="https://avatars.githubusercontent.com/u/176998915?v=4">
            </a>
        </div>
    </div>

    <div id="postingbox">

    </div>

    <div class="mycards">
        <div id="card" class="row row-cols-1 row-cols-md-4 g-4">

        </div>
    </div>
    <div class="jjal">
        <div class="dongryo" style="text-align: center; margin-top: 50px">
            <a href="https://github.com/node6-dev15" target="_blank">
                <img src="https://velog.velcdn.com/images/liha_engineer/post/681b4c8d-08c6-42b0-ae9b-286a73c147c1/image.png"
                    style="width: 1000px;">
            </a>
        </div>

        <div class="github_jandi" style="text-align: center; margin: 50px;">
            <p>잔디 랜덤가챠 - 누구의 잔디일까</p>
            <p>
                <img src="https://ghchart.rshah.org/mingyu6688" style="width: 500px;" />
                <img src="https://ghchart.rshah.org/liha-engineer" style="width: 500px;" />

            </p>
            <p>
                <img src="https://ghchart.rshah.org/sdh02142" style="width: 500px;" />
                <img src="https://ghchart.rshah.org/Chong-Chongs" style="width: 500px;" />
            </p>

        </div>

    </div>

</body>

</html>